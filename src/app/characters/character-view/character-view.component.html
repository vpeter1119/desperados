<div *ngIf="isLoading" class="progress">
  <div class="indeterminate"></div>
</div>
<div *ngIf="!isLoading">
  <div class="card blue-grey darken-1">
    <div class="card-image">
      <img src="http://petervertesi.com/images/western-cover-2.jpg" class="character-sheet-cover">
      <h4 class="card-title character-sheet-title">{{character.name}}</h4>
    </div>
    <div class="card-content">
      <div fxLayout="row wrap">
        <div class="card-panel character-sheet-section" fxFlex="100%">
          <p>Occupation: <span title="{{character.template.desc}}">{{character.template.name}}</span></p>
          <p>Sex: {{character.sex}}</p>
          <p>Age: {{character.age}}</p>
        </div>
        <!-- SECTION: ATTRIBUTES -->
        <div class="card-panel character-sheet-section" fxFlex="100%">
          <h5 class="card-title character-sheet-section-title">Attributes</h5>
          <div class="card-content" fxLayout="row wrap" fxLayoutGap="10%" fxLayoutGap.lt-md="0">
            <!-- PHYSICAL -->
            <div class="card-panel character-sheet-subsection" fxFlex="45%" fxFlex.lt-md="100%">
              <h6 class="card-title character-sheet-subsection-title">Physical</h6>
              <div class="card-content">
                <table fxShow fxHide.lt-md>
                  <tr *ngFor="let attr of physical">
                    <td title="{{rules.o.attributes[attr.name].desc}}">{{_text.Capitalize(attr.name)}}</td>
                    <td title="Substandard">
                      <i class="fas fa-square" *ngIf="character.attributes[attr.name]>0"></i>
                      <i class="far fa-square" *ngIf="character.attributes[attr.name]<1"></i>
                    </td>
                    <td title="Average">
                      <i class="fas fa-square" *ngIf="character.attributes[attr.name]>1"></i>
                      <i class="far fa-square" *ngIf="character.attributes[attr.name]<2"></i>
                    </td>
                    <td title="Talented">
                      <i class="fas fa-square" *ngIf="character.attributes[attr.name]>2"></i>
                      <i class="far fa-square" *ngIf="character.attributes[attr.name]<3"></i>
                    </td>
                    <td title="Dab Hand">
                      <i class="fas fa-square" *ngIf="character.attributes[attr.name]>3"></i>
                      <i class="far fa-square" *ngIf="character.attributes[attr.name]<4"></i>
                    </td>
                    <td title="Exceptional">
                      <i class="fas fa-square" *ngIf="character.attributes[attr.name]>4"></i>
                      <i class="far fa-square" *ngIf="character.attributes[attr.name]<5"></i>
                    </td>
                    <td title="Legend">
                      <i class="fas fa-square" *ngIf="character.attributes[attr.name]>5"></i>
                      <i class="far fa-square" *ngIf="character.attributes[attr.name]<6"></i>
                    </td>
                  </tr>
                </table>
                <table fxHide fxShow.lt-md>
                  <tr>
                    <td>Brawn</td>
                    <td>{{character.attributes.brawn}}</td>
                  </tr>
                  <tr>
                    <td>Agility</td>
                    <td>{{character.attributes.agility}}</td>
                  </tr>
                  <tr>
                    <td>Mettle</td>
                    <td>{{character.attributes.mettle}}</td>
                  </tr>
                </table>
              </div>
            </div>
            <!-- PHYSICAL -->
            <div class="card-panel character-sheet-subsection" fxFlex="45%" fxFlex.lt-md="100%">
              <h6 class="card-title character-sheet-subsection-title">Mental</h6>
              <div class="card-content">
                <table fxShow fxHide.lt-md>
                  <tr *ngFor="let attr of mental">
                    <td title="{{rules.o.attributes[attr.name].desc}}">{{_text.Capitalize(attr.name)}}</td>
                    <td title="Substandard">
                      <i class="fas fa-square" *ngIf="character.attributes[attr.name]>0"></i>
                      <i class="far fa-square" *ngIf="character.attributes[attr.name]<1"></i>
                    </td>
                    <td title="Average">
                      <i class="fas fa-square" *ngIf="character.attributes[attr.name]>1"></i>
                      <i class="far fa-square" *ngIf="character.attributes[attr.name]<2"></i>
                    </td>
                    <td title="Talented">
                      <i class="fas fa-square" *ngIf="character.attributes[attr.name]>2"></i>
                      <i class="far fa-square" *ngIf="character.attributes[attr.name]<3"></i>
                    </td>
                    <td title="Dab Hand">
                      <i class="fas fa-square" *ngIf="character.attributes[attr.name]>3"></i>
                      <i class="far fa-square" *ngIf="character.attributes[attr.name]<4"></i>
                    </td>
                    <td title="Exceptional">
                      <i class="fas fa-square" *ngIf="character.attributes[attr.name]>4"></i>
                      <i class="far fa-square" *ngIf="character.attributes[attr.name]<5"></i>
                    </td>
                    <td title="Legend">
                      <i class="fas fa-square" *ngIf="character.attributes[attr.name]>5"></i>
                      <i class="far fa-square" *ngIf="character.attributes[attr.name]<6"></i>
                    </td>
                  </tr>
                </table>
                <table fxHide fxShow.lt-md>
                  <tr>
                    <td>Insight</td>
                    <td>{{character.attributes.insight}}</td>
                  </tr>
                  <tr>
                    <td>Wits</td>
                    <td>{{character.attributes.wits}}</td>
                  </tr>
                  <tr>
                    <td>Resolve</td>
                    <td>{{character.attributes.resolve}}</td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
        </div>
        <!-- SECTION: CALCULATED VALUES -->
        <div class="card-panel character-sheet-section" fxFlex="100%">
          <h5 class="card-title character-sheet-section-title"></h5>
          <div class="card-content" fxLayout="row wrap" fxLayoutGap="2%" fxLayoutGap.lt-md="0">
            <div class="card-panel character-sheet-subsection" fxFlex="28%" fxFlex.lt-md="100%">
              <span class="calculated-text character-sheet-subsection-title">Hit Points: </span>
              <span class="calculated-value character-sheet-subsection-title">{{CalculateValues(character.attributes).hp}}</span>
            </div>
            <div class="card-panel character-sheet-subsection" fxFlex="30%" fxFlex.lt-md="100%">
              <span class="calculated-text character-sheet-subsection-title">Dueling Score: </span>
              <span class="calculated-value character-sheet-subsection-title">{{CalculateValues(character.attributes).ds}}</span>
            </div>
            <div class="card-panel character-sheet-subsection" fxFlex="38%" fxFlex.lt-md="100%">
              <span class="calculated-text character-sheet-subsection-title">Strength of Nerve: </span>
              <span class="calculated-value character-sheet-subsection-title">{{CalculateValues(character.attributes).son}}</span>
            </div>
          </div>
        </div>
        <!-- SECTION: SKILLS -->
        <div class="card-panel character-sheet-section" fxFlex="100%">
          <h5 class="card-title character-sheet-section-title">Skills</h5>
          <div class="card-content" fxLayout="row wrap" fxLayoutGap="10px">
            <table>
              <thead fxHide.lt-md>
                <tr fxLayout="row">
                  <th fxFlex="30%">Skill</th>
                  <th fxFlex="70%">Description</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let skill of character.skills" fxLayout="row">
                  <td fxFlex="30%">{{_text.Capitalize(skill.name)}}</td>
                  <td fxFlex="70%">{{skill.desc}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <!-- SECTION: SPECIAL -->
        <div class="card-panel character-sheet-section" fxFlex="100%">
          <h5 class="card-title character-sheet-section-title">Special Skills and Voodoo Spells</h5>
          <div class="card-content" fxLayout="row wrap" fxLayoutGap="10px">
            <table>
              <thead fxHide.lt-md>
                <tr fxLayout="row">
                  <th fxFlex="30%">Skill/Spell</th>
                  <th fxFlex="70%">Description</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let skill of character.special" fxLayout="row">
                  <td fxFlex="30%">{{skill.name}}</td>
                  <td fxFlex="70%">{{skill.desc}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <!-- SECTION: EQUIPMENT -->
        <div class="card-panel character-sheet-section" fxFlex="100%">
          <h5 class="card-title character-sheet-section-title">Equipment</h5>
          <div class="card-content" fxLayout="row wrap" fxLayoutGap="10px">
            <table>
              <thead fxHide.lt-md>
                <tr fxLayout="row">
                  <th fxFlex="30%">Equipment</th>
                  <th fxFlex="70%">Description</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of character.equipment" fxLayout="row">
                  <td fxFlex="30%">{{item.name}}</td>
                  <td fxFlex="70%">{{item.description}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      </div>
  </div>
</div>
